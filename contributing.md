
# CDM system for contributors

Информация для разработчиков системы. 

## Структура проекта

Все необходимые для работы приложения пакеты находятся в папке `packages`. 

Краткое описание:

- `configurators` - папка; содержит конфигураторы различных частей приложения (создание БД, генерация роутов и документации и т.д.);
- `decorators` - папка; содержит функции-декораторы для описания моделей; используются пользователем системы;
- `handlers` - папка; содержит функции-обработчики конечных точек;
- `i18n` - папка; содержит файлы для локализованных надписей в приложении;
- `models` - папка; содержит информацию о моделях;
- `server` - папка; содержит функции для разворачивания сервера;
- `utils` - папка; содержит какие-то полезные функции для всего проекта;
- `logger` - файл; вывод информации об операциях и ошибках;

## Конфигураторы

Главный конфигуратор приложения - [AppConfigurator](./packages/configurators/index.ts). Он регулирует работу остальных и объединяет их.

### `DatabaseConfigurator` - формирование параметров для создания БД

В [DatabaseConfigurator](./packages/configurators/databaseConfigurator/index.ts) создаётся экземпляр класса `Sequelize`, который принимает в себя параметры переданные в `AppConfigurator`. Также, создаются модели и добавляются связи между ними, согласно с описанными пользователем конфигурациями.

### `RoutesConfigurator` - формирование endpoints и их параметров

В [RoutesConfigurator](./packages/configurators/routesConfigurator/index.ts) создаются конечные точки и конфигурируются параметры для них. Стандартные конфигурации для конечных точек находятся в файле [./packages/decorators/routes/_constants.ts](./packages/decorators/routes/_constants.ts). 

Существует следующие типы конечных точек:
- `GET_ALL` - получить все записи;
- `GET_ONE` - получить запись (по id);
- `GET_RELATION` - получить записи модели (по имени), которая связана с другой моделью; например, получить все книги у автора;
- `CREATE` - создать запись;
- `UPDATE` - обновить запись (по id);
- `DELETE` - удалить запись.
Если пользователь не настроил конфигурацию с помощью декоратора `RoutesConfig`, то у каждой модели, по умолчанию, присутсвует каждый тип запроса.

Каждому параметру, согласно с его типом, присваивается свой валидатор. Все типы описаны в [FieldType](./packages/decorators/models/_types.ts).

### `DocsConfigurator` - документация endpoints из `RoutesConfigurator`
